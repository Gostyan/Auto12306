# Auto12306 抢票脚本 6.0

#### 基于 Selenium 的 12306 抢票自动化脚本。5.0 版本在 4.0(1) 可运行基础上新增：
- 配置文件（config.json）与交互式参数输入（优先读配置，缺失时交互询问，可选择保存）
- 席别与票型写入配置（票型可切换成人/学生；席别目前作为偏好记录）
- 车次选择由“指定车次”改为“出发时间范围过滤”，默认选择时间范围内最早可预订的车次

#### 基于 Selenium 的 12306 抢票自动化脚本。6.0 版本在 5.0 可运行基础上新增：
- 配置文件（config.json）与交互式参数输入支持指定车次
- 优化了效率，更快更强

> 说明：为保持稳定性，页面点击与下单流程沿用 4.0(1) 的实现，仅替换参数来源与选择策略。

## 环境要求
- Windows 10/11
- Python 3.9+（建议 3.10/3.11）
- Microsoft Edge 浏览器（与系统保持最新版）
- Selenium 4.6+（内置 Selenium Manager，可自动管理浏览器驱动）

**安装 selenium：**
```powershell
pip install selenium
```

## 文件结构（核心）
- `抢票脚本5.0.ipynb`：主笔记本，包含参数读取、时间范围过滤、登录、查询与下单主流程
- `抢票脚本5.0.ipynb`：主笔记本，基本功能、查询与下单主流程
- `config.json`：可选配置文件，若不存在则运行时通过交互输入生成

## 配置文件（config.json）示例
将文件放在与笔记本相同目录：
```json
{
  "from_station": "出发站",
  "to_station": "目的地站",
  "travel_date": "2025-10-05",
  "ticket_type": "adult",
  "target_train_number": "G1234",
  "depart_time_range": "07:00-11:30",
  "seat_category": "二等座",
  "seat_position_preference": "first",
  "booking_start_time": "2025-09-22 21:30:00"
}
```
配置项说明：
- `from_station`/`to_station`：出发/到达站（需与 12306 站名一致）
- `travel_date`：出发日期，格式 `YYYY-MM-DD`
- `ticket_type`：`adult`（成人）或 `student`（学生）
- `depart_time_range`：出发时间范围，格式 `HH:MM-HH:MM`（如 `07:00-09:30`）
- `target_train_number`：指定车次（如 `G2795`）；留空表示不指定，改为按时间范围选择
- `seat_category`：_席别偏好（待完善）_
- `seat_position_preference`：选座偏好 `first/aisle/window`（当前实现为快速选第一个可用座位）
- `booking_start_time`：开抢时刻，`""` 表示立即开始；填写 `YYYY-MM-DD HH:MM:SS` 将在该时刻准点开始

## 使用步骤
1. 打开 `抢票脚本6.0.ipynb`
   >也可以复制单元格保存到一个.py文件中运行
2. 依次运行所有单元（或使用“Run All”）
   > 首次运行会优先读取 `config.json`；若不存在，会交互式询问参数，可选择保存生成配置文件
3. 按提示完成 12306 扫码登录（请提前打开手机 12306 App 的扫码工具）
4. 脚本自动进入购票页，填写出发/到达站与日期，设置票型
5. 进入下单页后勾选乘车人、确定提示、（成人票）设置订单票种、提交、快速选座并最终确认

## 常见问题（FAQ）

  - 待补充 

## 注意事项与合规声明
- 本脚本仅用于学习与个人效率提升，请遵守 12306 网站服务条款
- 请合理设置刷新频率与重试次数，避免对网站造成不必要压力
- 高峰期网络与页面响应存在不确定性，脚本并不保证一定抢到票

## ToDO
- 完善效率与稳定性
- 增加多乘车人购票支持
- 支持座位偏好优先策略
